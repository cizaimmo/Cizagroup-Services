<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Connexion | CIZA GROUP Services</title>

<style>
body{
margin:0;
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
background:radial-gradient(circle at top,#06142E,#020617);
font-family:system-ui;
color:white;
}
.card{
max-width:420px;
width:100%;
background:linear-gradient(180deg,#0b1738,#071126);
border-radius:26px;
padding:34px;
border:1px solid rgba(242,184,64,.35);
box-shadow:0 30px 80px rgba(0,0,0,.6);
}
.logo{text-align:center;margin-bottom:18px}
.logo img{height:70px}
h1{text-align:center;color:#F2B840}
input{
width:100%;
padding:14px;
margin:10px 0;
border-radius:14px;
border:none;
background:#020617;
color:white;
}
button{
width:100%;
padding:16px;
border:none;
border-radius:30px;
background:#F2B840;
color:#000;
font-weight:700;
cursor:pointer;
}
#msg{text-align:center;margin-top:12px}
.links{text-align:center;margin-top:16px;font-size:14px}
.links a{color:#F2B840;text-decoration:none}
.support{text-align:center;margin-top:18px;font-size:13px;opacity:.9}
</style>
</head>

<body>

<div class="card">
  <div class="logo">
    <img src="https://raw.githubusercontent.com/cizaimmo/Cizagroup-Services/af7b0385b79f9f030ce8ee44bca672121d582666/logotransparent.png">
  </div>

  <h1>Connexion s√©curis√©e</h1>

  <input id="email" type="email" placeholder="Adresse email">
  <input id="password" type="password" placeholder="Mot de passe">

  <button onclick="login()">Se connecter</button>
  <div id="msg"></div>

  <div class="links">
    <a href="index.html">‚Üê Retour au site</a>
  </div>

  <div class="support">
    Besoin d‚Äôaide ?<br>
    WhatsApp : +257 79 94 50 07 ¬∑ +257 79 64 48 93<br>
    International : +1 514 502 9503
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyBAiJHbBvRO6cDFpm6C-5mQk6SiTtzcI8o",
  authDomain: "cizagroup-app.firebaseapp.com",
  projectId: "cizagroup-app",
  appId: "1:930936264084:web:5395360e54bf17bf492b81"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

window.login = async () => {
  const email = email.value.trim();
  const password = password.value.trim();
  const msg = document.getElementById("msg");

  if(!email || !password){
    msg.innerText = "Veuillez remplir tous les champs";
    return;
  }

  msg.innerText = "Connexion en cours...";

  try{
    await signInWithEmailAndPassword(auth, email, password);

    // ‚úÖ UTILISATEUR CONNECT√â (WEB)
    localStorage.setItem("ciza_user_logged", "true");

    // üîÅ REDIRECTION CORRECTE
    const target = localStorage.getItem("ciza_redirect_service") || "portal.html";
    localStorage.removeItem("ciza_redirect_service");

    window.location.replace(target);

  }catch(e){
    msg.innerText = "Email ou mot de passe incorrect ‚ùå";
  }
};
</script>

</body>
</html>
